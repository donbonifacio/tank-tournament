
#include "../include/BaseTank.h"

using namespace Tank;

//--------------------------------------------------------------------------------------------------------
BaseTank::BaseTank( const string& _url, int _health )
	: Movable( new SDL::FourDimensionsSpriteHandler( GLOBAL->getSurface(_url), TILE_SIZE ), _health )
{
	(GLOBAL->getSurface(_url))->setColorKey(0,0,0);
	for( int i=0; i < WEAPON_COUNT; ++i )
		weapons[i] = 0;
	currentWeapon = *weapons = new LitleFireWeapon();
	weapons[1] = new LargeFireWeapon();
	weapons[2] = new CannonWeapon();
}
	
//--------------------------------------------------------------------------------------------------------
void BaseTank::setDirection( Direction* _dir )
{
	if( 0 != _dir )
		spriteHandler->setDirection(_dir);
	dir = _dir;
}
//--------------------------------------------------------------------------------------------------------
bool BaseTank::fire()
{
	if( currentWeapon->ready() ) {
		currentWeapon->fire(this);
	}
	return true;
}
//--------------------------------------------------------------------------------------------------------
//--------------------------------------------------------------------------------------------------------
//--------------------------------------------------------------------------------------------------------
//--------------------------------------------------------------------------------------------------------
//--------------------------------------------------------------------------------------------------------
//--------------------------------------------------------------------------------------------------------
//--------------------------------------------------------------------------------------------------------
